// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Admin {
  id              String   @id @default(cuid())
  email           String   @unique
  password        String
  name            String?
  role            String   @default("writer") // admin, writer
  twoFactorSecret String?  // Secret for 2FA
  twoFactorEnabled Boolean @default(false)
  isActive        Boolean  @default(true)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}

model Hero {
  id          String   @id @default(cuid())
  callSign    String   // Позывний
  name        String   // Прізвище Ім'я
  description String?  @db.Text
  imageUrl    String?
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Story {
  id          String   @id @default(cuid())
  title       String
  content     String
  authorName  String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model PageSection {
  id          String   @id @default(cuid())
  sectionKey  String   @unique // hero, about, heroes, etc.
  title       String?
  subtitle    String?
  content     String?  @db.Text
  imageUrl    String?
  videoUrl    String?
  isActive    Boolean  @default(true)
  order       Int      @default(0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model HomePageSettings {
  id                  String   @id @default(cuid())
  
  // Hero Banner Section - UA
  heroTitle_ua          String?
  heroSubtitle_ua       String?
  heroDescription_ua    String?
  heroVideoUrl          String?
  
  // Hero Banner Section - EN
  heroTitle_en          String?
  heroSubtitle_en       String?
  heroDescription_en    String?
  
  // About Section (Third Block) - UA
  aboutLabel_ua         String?
  aboutTitle_ua         String?  @db.Text
  aboutText1_ua         String?  @db.Text
  aboutText2_ua         String?  @db.Text
  
  // About Section - EN
  aboutLabel_en         String?
  aboutTitle_en         String?  @db.Text
  aboutText1_en         String?  @db.Text
  aboutText2_en         String?  @db.Text
  
  // Heroes Slider Section - UA
  heroesTitle_ua        String?
  heroesSubtitle_ua     String?
  showHeroesSlider      Boolean  @default(true)
  
  // Heroes Slider Section - EN
  heroesTitle_en        String?
  heroesSubtitle_en     String?
  
  // Stone/Quote Block - UA
  stoneTitle_ua         String?  @db.Text
  stoneQuote_ua         String?  @db.Text
  stoneImageUrl         String?
  showStoneBlock        Boolean  @default(true)
  
  // Stone/Quote Block - EN
  stoneTitle_en         String?  @db.Text
  stoneQuote_en         String?  @db.Text
  
  // Gallery Section - UA
  galleryTitle_ua       String?
  gallerySubtitle_ua    String?
  showGallery           Boolean  @default(true)
  
  // Gallery Section - EN
  galleryTitle_en       String?
  gallerySubtitle_en    String?
  
  // General Settings
  isActive              Boolean  @default(true)
  updatedAt             DateTime @updatedAt
  createdAt             DateTime @default(now())
  
  @@map("home_page_settings")
}

// Slider 1: Heroes with call signs
model HeroSlide {
  id          String   @id @default(cuid())
  imageUrl    String
  callSign    String   // Позывной
  link        String?  // Optional link
  order       Int      @default(0)
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  @@map("hero_slides")
}

// Slider 2: Gallery with captions
model GallerySlide {
  id          String   @id @default(cuid())
  imageUrl    String
  caption     String   // Подпись
  order       Int      @default(0)
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  @@map("gallery_slides")
}

// Footer Settings
model FooterSettings {
  id                String   @id @default(cuid())
  
  // Footer Text
  aboutText         String?  @db.Text
  copyrightText     String?
  
  // Contact Info
  email             String?
  phone             String?
  address           String?
  
  // Social Media Links
  facebookUrl       String?
  instagramUrl      String?
  twitterUrl        String?
  youtubeUrl        String?
  telegramUrl       String?
  linkedinUrl       String?
  
  // Additional Links
  privacyPolicyUrl  String?
  termsOfServiceUrl String?
  
  isActive          Boolean  @default(true)
  updatedAt         DateTime @updatedAt
  createdAt         DateTime @default(now())
  
  @@map("footer_settings")
}

// Your Stories Page Settings
model YourStoriesPageSettings {
  id                    String   @id @default(cuid())
  
  // Banner Section
  bannerTitle           String?
  bannerSubtitle        String?  @db.Text
  searchPlaceholder     String?
  
  // Form Block
  formTitle             String?  @db.Text
  formSubtitle          String?
  formButtonText        String?
  
  isActive              Boolean  @default(true)
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt
  
  @@map("your_stories_page_settings")
}

// Find Hero Page Settings
model FindHeroPageSettings {
  id                    String   @id @default(cuid())
  
  // Banner Section
  bannerTitle           String?
  searchPlaceholder     String?
  medalImageUrl         String?
  
  isActive              Boolean  @default(true)
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt
  
  @@map("find_hero_page_settings")
}

// Media Files
model MediaFile {
  id          String   @id @default(cuid())
  filename    String
  originalName String
  mimeType    String
  size        Int      // in bytes
  url         String
  createdBy   String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  @@map("media_files")
}

model Page {
  id          String   @id @default(cuid())
  slug        String   @unique // home, your-stories, find-hero
  title       String
  description String?
  metaTitle   String?
  metaDescription String?
  isActive    Boolean  @default(true)
  sections    PageContent[]
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model PageContent {
  id          String   @id @default(cuid())
  pageId      String
  page        Page     @relation(fields: [pageId], references: [id], onDelete: Cascade)
  sectionKey  String   // banner, form, list, etc.
  title       String?
  subtitle    String?
  content     String?  @db.Text
  imageUrl    String?
  videoUrl    String?
  isActive    Boolean  @default(true)
  order       Int      @default(0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Submission {
  id                String   @id @default(cuid())
  type              String   // hero-submission, story-submission, contact
  name              String
  email             String?
  phone             String?
  telegramUsername  String?
  heroName          String?
  residence         String?
  birthDate         String?
  deathDate         String?
  heroStory         String?  @db.Text
  message           String?  @db.Text
  imageUrl          String?
  mediaFiles        String[] // Array of uploaded file URLs
  status            String   @default("pending") // pending, approved, rejected
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
}
